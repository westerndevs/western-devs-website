<!DOCTYPE html>
<html lang="en" xml:lang="en">

  <head>
  
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Certificates for Everyone! Let&#39;s Encrypt in Azure with ASP.NET Core | Western Devs</title>
  <meta name="description" content="This may have been one of the most exciting things (from a web site owner&#39;s perspective) to happen in quite a while...">
<meta property="og:type" content="article">
<meta property="og:title" content="Certificates for Everyone! Let&#39;s Encrypt in Azure with ASP.NET Core">
<meta property="og:url" content="https://westerndevs.com/Tools/Lets-Encrypt-ASPNET-Core/index.html">
<meta property="og:site_name" content="Western Devs">
<meta property="og:description" content="This may have been one of the most exciting things (from a web site owner&#39;s perspective) to happen in quite a while...">
<meta property="og:image" content="http://i.imgur.com/sQcRNFX.png">
<meta property="article:published_time" content="2016-03-22T20:00:00.000Z">
<meta property="article:modified_time" content="2021-05-08T22:24:20.561Z">
<meta property="article:author" content="Western Devs">
<meta property="article:tag" content="azure">
<meta property="article:tag" content="asp.net">
<meta property="article:tag" content="let&#39;s encrypt">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://i.imgur.com/sQcRNFX.png">
<meta name="twitter:creator" content="@westerndevs">

    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="title" content="WesternDevs">   
    <meta name="keywords" content="software development,software,asp.net,blog">
    <meta name="description" content="We're all west of somewhere">
    <meta name="copyright" content="WesternDevs">
    <meta name="revisit-after" content="15 days">
    <meta name="robots" content="all">
    <meta name="MSSmartTagsPreventParsing" content="true">
  
    <link rel="alternate" href="/feed.xml" title="Western Devs" type="application/atom+xml">
  
  
<link rel="stylesheet" href="/css/style.css">

      
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <script src="//code.jquery.com/jquery-1.11.3.min.js"></script>  
  <meta name="generator" content="Hexo 4.2.0"></head>

<body>

<!-- FIXED HEADER BECAUSE SCROLLING -->
<!--HEADER STARTS-->
<div class="WrapperHeader">
<div style="display:inline-block; text-align: center;">
<div class="Header">

  <div class="HeaderLogo">
    <a href="/"><img src="/images/header_logo_transparent.png" alt="WesternDevs" title="WesternDevs" border="0" style="width: 206px; height: 64px;" width="206" height="64"></a>
  </div>

  <div class="HeaderLinks">
      <a href="/posts" class="nav">POSTS</a>       
      <a href="/podcasts" class="nav">PODCASTS</a>       
      <a href="/whoweare" class="nav">ABOUT</a>  
      <a href="/whatwevedone" class="nav">WHAT WE'VE DONE</a>  
      <a href="/speaking" class="nav">SPEAKING</a>
      <div class="HeaderIcons">
        <a href="mailto:info@westerndevs.com"><img src="/images/icon_email.png" border="0" alt="Email" title="Email" height="26" width="26"></a>
        <a href="/feed.xml"><img src="/images/icon_subscribe.png" border="0" alt="Subscribe" title="Subscribe" height="26" width="27"></a>
        <a href="http://twitter.com/westerndevs" target="_blank"><img src="/images/icon_twitter.png" border="0" alt="Twitter" title="Twitter" height="26" width="27"></a>
        <a href="http://github.com/westerndevs" target="_blank"><img src="/images/icon_github.png" border="0" alt="GitHub" title="GitHub" height="26" width="27"></a>     
      </div>
  </div>
  
</div>
</div>
</div>
<!--HEADER ENDS-->    



<!--WRAPPER STARTS-->
<div class="Wrapper" style="">

<!--SUBHEAD STARTS-->
<div class="WrapperSubHeaderSubpage">
<center>
	<div class="SubHeader">
		<H1 class="title"><img class="icon" src="/images/icon_posts.png" alt="POST" title="POST" border="0"> POST</H1>
	</div>
</center>
</div>
<!--SUBHEAD ENDS-->

<!--PAGE CONTENT STARTS-->
<center>
<div class="WrapperContent">

<!--MAIN CONTENT STARTS-->
	<div class="SubpageBoxSubLrg">
		<div class="SubpageBoxSubLrgContent">
		    <div class='postTitle'>
  <div class="ListLrgDateBG">
    <div class="ListLrgDateMonth">MAR</div>
    <div class="ListLrgDateDay">22</div>
    <div class="ListLrgDateYear">2016</div>
  </div>
  <h2>Certificates for Everyone! Let&#39;s Encrypt in Azure with ASP.NET Core</h2>
</div>

		    

			<div id="mainPostContent">
	        <p>This may have been one of the most exciting things (from a web site owner's perspective) to happen in quite a while, and something I think the industry
has been hoping would happen for a long time. Free SSL certificates for everyone! With the creation of <a href="https://letsencrypt.org" target="_blank" rel="noopener">letsencrypt.org</a>, an organization whose goal is to
make certificate usage free and easy, we are finally freed from the shackles of organizations like GoDaddy or Verisign who charge (sometimes exorbitant) fees
just so that an individual or organization can have the ability encrypt their web traffic.</p>
<!-- more -->
<p>Now the tricky thing with Let's Encrypt is the automation part. Because of how Let's Encrypt uses automation to provision certificates, it was originally built to
work with Apache/Linux based web servers. This made anyone who used Azure or IIS feel like the kid on the outside looking in. Luckily, nothing that Let's Encrypt
does is voodoo magic and it didn't take long for the Azure community to build the necessary parts to get this working in Azure.</p>
<p>There is a fantastic post from <a href="https://gooroo.io/GoorooTHINK/Article/16420/Lets-Encrypt-Azure-Web-Apps-the-Free-and-Easy-Way/20047#.Vuron4-cGM9" target="_blank" rel="noopener">Nik Molnar</a> that describes
how to get this working on Azure. I definitely want to talk about Let's Encrypt on Azure, but I don't want to take away from Nik's post, so go there and  check it out.</p>
<p>What I'm going to add though is a bit of PowerShell goodness around some of his steps that makes it a bit easier to get Let's Encrypt up and running on your Azure
website. I'm also going to add a couple tidbits about getting it working on ASP.NET Core.</p>
<h4>Pre-requisites</h4>
<p>Just going to re-iterate <a href="https://gooroo.io/GoorooTHINK/Article/16420/Lets-Encrypt-Azure-Web-Apps-the-Free-and-Easy-Way/20047#.Vuron4-cGM9" target="_blank" rel="noopener">Nik's prerequisites</a>:</p>
<ol>
<li>Scale up your Azure Website to at least an S1 (1 dedicated IP, 5 SNI)</li>
<li>Acquire your custom domain. The <em>{domain name here}</em>.azurewebsites.net domains are all secured with by a Microsoft certificate so if you aren't planning on using your own domain name, you can just stop now.</li>
<li>Create a storage account for the Let's Encrypt Site extension to use</li>
<li>Put your storage account conne   ction strings into two Application Settings on your website.</li>
<li>Register a Service Princpal. This is the identity that is allowed to execute the web jobs the the site extension uses to do the work</li>
</ol>
<h2>PowerShell</h2>
<p>Again, as per <a href="https://gooroo.io/GoorooTHINK/Article/16420/Lets-Encrypt-Azure-Web-Apps-the-Free-and-Easy-Way/20047#.Vuron4-cGM9" target="_blank" rel="noopener">Nik's post</a>, you'll need the <a href="https://azure.microsoft.com/en-us/documentation/articles/powershell-install-configure/" target="_blank" rel="noopener">Azure PowerShell module</a> before we get started.</p>
<p>In an Azure .ps1 (script) or .psm1 (module), or in PowerShell ISE, paste the function below.</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Set-AllAzureDetailsForLetsEncrypt</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="comment">&lt;# </span></span><br><span class="line"><span class="comment">    <span class="doctag">.SYNOPSIS</span></span></span><br><span class="line"><span class="comment">    Set up an Azure Website to be able to use the Let's Encrypt Site Extension</span></span><br><span class="line"><span class="comment">    <span class="doctag">.DESCRIPTION</span></span></span><br><span class="line"><span class="comment">    This function will use the information provided to create a new connection between the Let's Encrypt Site extension and your website.</span></span><br><span class="line"><span class="comment">    It will then use this user/connection to setup the certificate from Let's Encrypt on your web site</span></span><br><span class="line"><span class="comment">    <span class="doctag">.EXAMPLE</span></span></span><br><span class="line"><span class="comment">    Set-AllAzureDetailsForLetsEncrypt -subscriptionId &#123;guid&#125; -uniqueUri &#123;Any unique Url&#125; -strongPassword &#123;password&#125; -displayName &#123;Name of Application&#125; -resourceGroupName &#123;Name of ResourceGroup to work in&#125;</span></span><br><span class="line"><span class="comment">    <span class="doctag">.EXAMPLE</span></span></span><br><span class="line"><span class="comment">    Set-AllAzureDetailsForLetsEncrypt -subscriptionId 00000000-0000-0000-0000-000000000000 -uniqueUri "http://myapplication-091820398123" -strongPassword "P@ssw0rd" -displayName "Let's Encrypt Site Extension" -resourceGroupName "Default-Web-WestUS"</span></span><br><span class="line"><span class="comment">    <span class="doctag">.PARAMETER subscriptionId</span></span></span><br><span class="line"><span class="comment">    (optional) The subscriptionId to attempt to use during the login</span></span><br><span class="line"><span class="comment">    <span class="doctag">.PARAMETER uniqueUri</span></span></span><br><span class="line"><span class="comment">    The uniqueUri of the "app" that we are creating in Azure Active Directory </span></span><br><span class="line"><span class="comment">    <span class="doctag">.PARAMETER strongPassword</span></span></span><br><span class="line"><span class="comment">    The strong password of the "app" that we are creating in Azure Active Directory </span></span><br><span class="line"><span class="comment">    <span class="doctag">.PARAMETER displayName</span></span></span><br><span class="line"><span class="comment">    (optional) The name of the application that we will be creating in Azure Active Directory (defaults to "Let's Encrypt Site Extension")</span></span><br><span class="line"><span class="comment">    <span class="doctag">.PARAMETER resourceGroupName</span></span></span><br><span class="line"><span class="comment">    The name of the ResourceGroup that this app lives in.</span></span><br><span class="line"><span class="comment">#&gt;</span></span><br><span class="line"></span><br><span class="line">    [<span class="type">CmdLetBinding</span>()]</span><br><span class="line">    <span class="keyword">param</span>(</span><br><span class="line">        [<span class="type">parameter</span>(<span class="type">Mandatory</span> = <span class="variable">$false</span>)]</span><br><span class="line">        [<span class="type">guid</span>]<span class="variable">$subscriptionId</span>,</span><br><span class="line">        [<span class="type">parameter</span>(<span class="type">Mandatory</span> = <span class="variable">$true</span>)]</span><br><span class="line">        [<span class="built_in">string</span>]<span class="variable">$uniqueUri</span>,</span><br><span class="line">        [<span class="type">parameter</span>(<span class="type">Mandatory</span> = <span class="variable">$true</span>)]</span><br><span class="line">        [<span class="built_in">string</span>]<span class="variable">$strongPassword</span>,</span><br><span class="line">        [<span class="type">parameter</span>(<span class="type">Mandatory</span> = <span class="variable">$false</span>)]</span><br><span class="line">        [<span class="built_in">string</span>]<span class="variable">$displayName</span>,</span><br><span class="line">        [<span class="type">parameter</span>(<span class="type">Mandatory</span> = <span class="variable">$true</span>)]</span><br><span class="line">        [<span class="built_in">string</span>]<span class="variable">$resourceGroupName</span></span><br><span class="line">    )</span><br><span class="line">    <span class="keyword">begin</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>([<span class="built_in">string</span>]::IsNullOrEmpty(<span class="variable">$displayName</span>))&#123; <span class="variable">$displayName</span> = <span class="string">"Let's Encrypt Site Extension"</span> &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">process</span>&#123;</span><br><span class="line">         <span class="comment"># log into your Azure Account for a given subscription</span></span><br><span class="line">         <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="variable">$subscriptionId</span> <span class="operator">-eq</span> <span class="variable">$null</span>)&#123;</span><br><span class="line">                <span class="variable">$account</span> = Login<span class="literal">-AzureRMAccount</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="variable">$account</span> = Login<span class="literal">-AzureRMAccount</span> <span class="literal">-SubscriptionId</span> <span class="variable">$subscriptionId</span></span><br><span class="line">            &#125;</span><br><span class="line">         &#125;<span class="keyword">catch</span>&#123;</span><br><span class="line">            <span class="built_in">Write-Error</span> <span class="string">"Failed to log into Azure with the credentials or SubscriptionId provided."</span></span><br><span class="line">            <span class="keyword">break</span>             </span><br><span class="line">         &#125;</span><br><span class="line">         </span><br><span class="line">         <span class="comment"># create a new active directory application</span></span><br><span class="line">         <span class="variable">$app</span> = <span class="built_in">New-AzureRmADApplication</span> <span class="literal">-DisplayName</span> <span class="variable">$displayName</span> <span class="literal">-HomePage</span> <span class="variable">$uniqueUri</span> <span class="literal">-IdentifierUris</span> <span class="variable">$uniqueUri</span> <span class="literal">-Password</span> <span class="variable">$strongPassword</span></span><br><span class="line">         </span><br><span class="line">         <span class="comment"># create a new Service Principal for your application</span></span><br><span class="line">         <span class="built_in">New-AzureRmADServicePrincipal</span> <span class="literal">-ApplicationId</span> <span class="variable">$app</span>.ApplicationId</span><br><span class="line">         </span><br><span class="line">         <span class="comment"># assign your Service princpal as a contributor</span></span><br><span class="line">         <span class="built_in">New-AzureRmRoleAssignment</span> <span class="literal">-RoleDefinitionName</span> Contributor <span class="literal">-ServicePrincipalName</span> <span class="variable">$app</span>.ApplicationId</span><br><span class="line">         </span><br><span class="line">         <span class="comment"># store these details to transfer to the extension which will use the service principal to do it's work</span></span><br><span class="line">         <span class="variable">$letsEncrypt</span> = <span class="selector-tag">@</span>&#123;&#125;</span><br><span class="line">         <span class="variable">$letsEncrypt</span>.Tenant = <span class="variable">$account</span>.Context.Tenant.TenantId</span><br><span class="line">         <span class="variable">$letsEncrypt</span>.SubscriptionId = <span class="variable">$account</span>.Context.Subscription.SubscriptionId</span><br><span class="line">         <span class="variable">$letsEncrypt</span>.ClientId = <span class="variable">$app</span>.ApplicationId </span><br><span class="line">         <span class="variable">$letsEncrypt</span>.ClientSecret = <span class="variable">$strongPassword</span></span><br><span class="line">         <span class="variable">$letsEncrypt</span>.ResourceGroupName = <span class="variable">$resourceGroupName</span></span><br><span class="line">         </span><br><span class="line">         <span class="comment"># return the letsEncrypt object with all of our details to make it easy to clip them into the website extensions fields </span></span><br><span class="line">         <span class="variable">$letsEncrypt</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">end</span>&#123;&#125;</span><br><span class="line">&#125; <span class="comment">#end function Set-AllAzureDetailsForLetsEncrypt</span></span><br></pre></td></tr></table></figure>
<p>After you've pasted this function into a PowerShell script file or directly into a session type in the following:</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$letsEncrypt</span> = <span class="built_in">Set-AllAzureDetailsForLetsEncrypt</span> <span class="literal">-subscriptionId</span> &lt;Insert SubscriptionId Here&gt; <span class="literal">-uniqueUri</span> <span class="string">"http://myapplication-091820398123"</span> <span class="literal">-strongPassword</span> <span class="string">"P@ssw0rd"</span> <span class="literal">-displayName</span> <span class="string">"Let's Encrypt Site Extension"</span> <span class="literal">-resourceGroupName</span> <span class="string">"Default-Web-WestUS"</span></span><br></pre></td></tr></table></figure>
<p>You do not need to provide the SubscriptionId if your account/login is only associated with one subscription. Also, you do not need to provide a DisplayName if you don't mind the display name being &quot;Let's Encrypt Site Extension&quot;. You must provide the other parameters.</p>
<p>Once you have run through the script, you should have an object in the <code>$letsEncrypt</code> variable that has everything you need for entering the data in the Site Extension.</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$letsEncrypt </span><br><span class="line"></span><br><span class="line">Name                           Value                                                            </span><br><span class="line">----                           -----                                                            </span><br><span class="line">SubscriptionId                 <span class="number">11111111</span><span class="number">-2222</span><span class="number">-3333</span><span class="number">-4444</span><span class="number">-555555555555</span>                             </span><br><span class="line">ResourceGroupName              Default-WestUs<span class="number">-1</span>                                                 </span><br><span class="line">Tenant                         <span class="number">11111111</span><span class="number">-2222</span><span class="number">-3333</span><span class="number">-4444</span><span class="number">-555555555555</span>                             </span><br><span class="line">ClientSecret                   <span class="symbol">P@</span>ssw0rd                                                         </span><br><span class="line">ClientId                       <span class="number">00000000</span><span class="number">-0000</span><span class="number">-0000</span><span class="number">-0000</span><span class="number">-000000000000</span></span><br></pre></td></tr></table></figure>
<p>Now you will be able to type <code>$letsEncrypt.Tenant | clip</code> to get the TenantId for pasting into the Site Extension fields. You can do this for each
field that is required for the extension to run.</p>
<h2>ASP.NET Core</h2>
<p>ASP.NET Core (formerly know as ASP.NET 5/MVC 6) had a different approach to handling static files, which are required for Let's Encrypt to work. Basically,
what happens is the WebJob gets some files from Let's Encrypt. Let's Encrypt will then use the DNS entry and this &quot;well-known&quot; location on your site to see if the files
are there. If they are there, you own the domain, and the certificate can be approved automatically. If you didn't own the domain, and hadn't setup the Let's Encrypt Site Extension
to do all of this work, none of this would have worked and it could be assumed that you do not own the domain.</p>
<p>If you look in your Kudo dashboard after the Let's Encrypt Site Extension has run, you'll see the following you your folder structure:</p>
<p>d:/home/site/wwwroot/.well-known/acme-challenge</p>
<p>And you'll see the challenge files in the last folder</p>
<p><img src="http://i.imgur.com/sQcRNFX.png" alt=".well-known-acme-challenge"></p>
<h4>The Thing I had Trouble With</h4>
<p>I couldn't find a good example at the time of how to allow Let's Encrypt to get these .well-known files using ASP.NET Core. So I created a controller that basically returned the contents when asked for a specific route.</p>
<p>The URI that Let's Encrypt will look for these well-known files is http://{mydomainname}.com/.well-known/acme-challenge</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">[<span class="meta">Route(<span class="meta-string">".well-known"</span>)</span>]</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">WellKnownController</span> : <span class="title">Controller</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">WellKnownController</span>(<span class="params">IHostingEnvironment env</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        Env = env;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> IHostingEnvironment Env &#123; <span class="keyword">get</span>; &#125;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">HttpGet(<span class="meta-string">"acme-challenge/&#123;id&#125;"</span>)</span>]</span><br><span class="line">    [<span class="meta">Produces(<span class="meta-string">"text/json"</span>)</span>]</span><br><span class="line">    <span class="function"><span class="keyword">public</span> IActionResult <span class="title">Get</span>(<span class="params"><span class="keyword">string</span> id</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">var</span> content = <span class="keyword">string</span>.Empty;</span><br><span class="line">        <span class="keyword">var</span> path = Env.WebRootPath;</span><br><span class="line">        <span class="keyword">var</span> fullPath = Path.Combine(path, <span class="string">@".well-known\acme-challenge"</span>);</span><br><span class="line">        <span class="keyword">var</span> dirInfo = <span class="keyword">new</span> DirectoryInfo(fullPath);</span><br><span class="line">        <span class="keyword">var</span> files = dirInfo.GetFiles();</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="keyword">var</span> fileInfo <span class="keyword">in</span> files)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (fileInfo.Name == id)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">using</span> (<span class="keyword">var</span> file = System.IO.File.OpenText(fileInfo.FullName))</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">return</span> Ok(file.ReadToEnd());</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Ok(content);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4>Update</h4>
<p>At the time of this writing, I haven't had a chance to confirm if this works since the Let's Encrypt files do not have an extension.
<a href="http://docs.asp.net/en/latest/fundamentals/static-files.html" target="_blank" rel="noopener">Handling Static Files in ASP.NET Core</a></p>
<h2>That's It!</h2>
<p>Hopefully, between <a href="https://gooroo.io/GoorooTHINK/Article/16420/Lets-Encrypt-Azure-Web-Apps-the-Free-and-Easy-Way/20047#.Vuron4-cGM9" target="_blank" rel="noopener">Nik's fantastic post</a> and this post, you should have a fairly good understanding of what has been happening, and you've got your
ASP.NET Core site secured and up and running on Azure using <a href="https://letsencrypt.org" target="_blank" rel="noopener">Let's Encrypt</a>!!!</p>

	        </div>

            
            <section id="comments">
            <div id="disqus_thread">
                <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript" target="_blank" rel="noopener">comments powered by Disqus.</a></noscript>
            </div>
            </section>
            
		</div>
	</div>
<!--MAIN CONTENT ENDS-->

<!--SIDEBAR CONTENT STARTS-->
	<div class="SubpageBoxSubSm">
		<div class="SubpageBoxSubSmContent">
			
			

			<div class="ProfileImg">
				
				<a href="/bios/dave_white">
				
					<img src='https://www.gravatar.com/avatar/4b7708d2ae7f7bb866446e0459e3e156?s=200' />
				
				</a>
				
			</div>

			<BR clear="all">

			<h2><a href="/bios/dave_white">Dave White</a></h2>
			
			<a href="mailto:dmhwhite@gmail.com"><img class="ProfileIcon" src="/images/icon_email.png" border="0" alt="Email" title="Email"> Email</a><BR>
			
			
			<a href="http://agileramblings.com/" target="_blank"><img class="ProfileIcon" src="/images/icon_web.png" border="0" alt="Web" title="Web"> Web</a><BR>
			
			
			<a href="http://twitter.com/AgileRamblings" target="_blank"><img class="ProfileIcon" src="/images/icon_twitter.png" border="0" alt="Twitter" title="Twitter"> Twitter</a><BR>
			
			
			<a href="https://github.com/agileramblings" target="_blank"><img class="ProfileIcon" src="/images/icon_github.png" border="0" alt="GitHub" title="GitHub"> GitHub</a><br>
			
			
			<a href="https://www.linkedin.com/in/dave-white" target="_blank"><img class="ProfileIcon" src="/images/icon_linkedin.png" border="0" alt="LinkedIN" title="LinkedIN"> LinkedIn</a><br>
			
			
 			<a href="/feeds/dave_white.xml"><img class="ProfileIcon" src="/images/icon_subscribe.png" /> RSS</a>
			

			<hr />
			<h4>Looking for someone else?</h4>
			<p>You can find the rest of the Western Devs Crew <a href="/whoweare">here</a>.</p>
		</div>
	</div>
<!--SIDEBAR CONTENT ENDS-->


</div>
</center>
<!--PAGE CONTENT ENDS-->


<!--FOOTER STARTS-->
<center>
  <div class="FooterBarTxt">&copy; 2015 Western Devs. All Rights Reserved. Design by <a href="http://www.karenchudobiak.ca" target="_blank">Karen Chudobiak, Graphic Designer</a></div>
</center>
<!--FOOTER ENDS-->

<!-- NAV FOOTER STARTS -->
<div class="NavFooter">
  <a href="/posts" alt="Posts"><i class="fa fa-newspaper-o fa-2x"></i><span>Posts</span></a>
  <a href="/podcasts" alt="Podcasts"><i class="fa fa-volume-up fa-2x"></i><span>Podcasts</span></a>
  <a href="/whoweare" alt="About"><i class="fa fa-star fa-2x"></i><span>About</span></a>
  <a href="/whatwevedone" alt="What We've Done"><i class="fa fa-trophy fa-2x"></i><span>Work</span></a>
  <a href="/speaking" alt="Speaking"><i class="fa fa-comment-o fa-2x fa-flip-horizontal"></i><span>Speaking</span></a>
</div>
<!-- NAV FOOTER ENDS -->




</div>
<!--WRAPPER ENDS-->


<script>
  var disqus_shortname = 'westerndevs';
  
  var disqus_url = 'https://westerndevs.com/Tools/Lets-Encrypt-ASPNET-Core/'.replace(".com//", ".com/");
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
  
function shuffle(array) {
  var currentIndex = array.length, temporaryValue, randomIndex;

  // While there remain elements to shuffle...
  while (0 !== currentIndex) {

    // Pick a remaining element...
    randomIndex = Math.floor(Math.random() * currentIndex);
    currentIndex -= 1;

    // And swap it with the current element.
    temporaryValue = array[currentIndex];
    array[currentIndex] = array[randomIndex];
    array[randomIndex] = temporaryValue;
  }

  return array;
}

</script>


</body>

  
<!-- Google Analytics -->
<script type="text/javascript">
if (document.location.hostname.search("westerndevs.com") !== -1 || document.location.hostname.search("www.westerndevs.com") !== -1) {
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-37617956-2', 'auto');

ga('set', 'contentGroup1', 'dave_white');

ga('send', 'pageview');
}
</script>
<!-- End Google Analytics -->



</html>
