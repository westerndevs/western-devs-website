<!DOCTYPE html>
<html lang="en" xml:lang="en">

  <head>
  
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Running Tomcat Apps on Docker through Eclipse | Western Devs</title>
  <meta name="description" content="If you didn&#39;t already know, Docker is pretty cool. Not sure what it is? My fellow Western Dev Kyle Baley explains it really well and provides some great cases about why Docker is fantastic. This post">
<meta property="og:type" content="article">
<meta property="og:title" content="Running Tomcat Apps on Docker through Eclipse">
<meta property="og:url" content="https://westerndevs.com/_/running-tomcat-apps-on-docker-through-eclipse/index.html">
<meta property="og:site_name" content="Western Devs">
<meta property="og:description" content="If you didn&#39;t already know, Docker is pretty cool. Not sure what it is? My fellow Western Dev Kyle Baley explains it really well and provides some great cases about why Docker is fantastic. This post">
<meta property="og:image" content="http://blog.davidwesst.com/2015/08/Running-Tomcat-Apps-on-Docker-through-Eclipse/1-externaltoolsbutton.png">
<meta property="og:image" content="http://blog.davidwesst.com/2015/08/Running-Tomcat-Apps-on-Docker-through-Eclipse/2-configwindow.png">
<meta property="article:published_time" content="2015-08-07T16:55:40.000Z">
<meta property="article:modified_time" content="2024-05-24T21:36:34.601Z">
<meta property="article:author" content="Western Devs">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://blog.davidwesst.com/2015/08/Running-Tomcat-Apps-on-Docker-through-Eclipse/1-externaltoolsbutton.png">
<meta name="twitter:creator" content="@westerndevs">

    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="title" content="WesternDevs">   
    <meta name="keywords" content="software development,software,asp.net,blog">
    <meta name="description" content="We're all west of somewhere">
    <meta name="copyright" content="WesternDevs">
    <meta name="revisit-after" content="15 days">
    <meta name="robots" content="all">
    <meta name="MSSmartTagsPreventParsing" content="true">
  
    <link rel="canonical" href="http://blog.davidwesst.com/2015/08/Running-Tomcat-Apps-on-Docker-through-Eclipse/">
  
  
    <link rel="alternate" href="/feed.xml" title="Western Devs" type="application/atom+xml">
  
  
<link rel="stylesheet" href="/css/style.css">

      
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <script src="//code.jquery.com/jquery-1.11.3.min.js"></script>  
  <meta name="generator" content="Hexo 4.2.1"></head>

<body>

<!-- FIXED HEADER BECAUSE SCROLLING -->
<!--HEADER STARTS-->
<div class="WrapperHeader">
<div style="display:inline-block; text-align: center;">
<div class="Header">

  <div class="HeaderLogo">
    <a href="/"><img src="/images/header_logo_transparent.png" alt="WesternDevs" title="WesternDevs" border="0" style="width: 206px; height: 64px;" width="206" height="64"></a>
  </div>

  <div class="HeaderLinks">
      <a href="/posts" class="nav">POSTS</a>       
      <a href="/podcasts" class="nav">PODCASTS</a>       
      <a href="/whoweare" class="nav">ABOUT</a>  
      <a href="/whatwevedone" class="nav">WHAT WE'VE DONE</a>  
      <a href="/speaking" class="nav">SPEAKING</a>
      <div class="HeaderIcons">
        <a href="mailto:info@westerndevs.com"><img src="/images/icon_email.png" border="0" alt="Email" title="Email" height="26" width="26"></a>
        <a href="/feed.xml"><img src="/images/icon_subscribe.png" border="0" alt="Subscribe" title="Subscribe" height="26" width="27"></a>
        <a href="http://twitter.com/westerndevs" target="_blank"><img src="/images/icon_twitter.png" border="0" alt="Twitter" title="Twitter" height="26" width="27"></a>
        <a href="http://github.com/westerndevs" target="_blank"><img src="/images/icon_github.png" border="0" alt="GitHub" title="GitHub" height="26" width="27"></a>     
      </div>
  </div>
  
</div>
</div>
</div>
<!--HEADER ENDS-->    



<!--WRAPPER STARTS-->
<div class="Wrapper" style="">

<!--SUBHEAD STARTS-->
<div class="WrapperSubHeaderSubpage">
<center>
	<div class="SubHeader">
		<H1 class="title"><img class="icon" src="/images/icon_posts.png" alt="POST" title="POST" border="0"> POST</H1>
	</div>
</center>
</div>
<!--SUBHEAD ENDS-->

<!--PAGE CONTENT STARTS-->
<center>
<div class="WrapperContent">

<!--MAIN CONTENT STARTS-->
	<div class="SubpageBoxSubLrg">
		<div class="SubpageBoxSubLrgContent">
		    <div class='postTitle'>
  <div class="ListLrgDateBG">
    <div class="ListLrgDateMonth">AUG</div>
    <div class="ListLrgDateDay">7</div>
    <div class="ListLrgDateYear">2015</div>
  </div>
  <h2>Running Tomcat Apps on Docker through Eclipse</h2>
</div>

		    

<p class="TXTsm">ORIGINALLY POSTED TO: <a href="http://blog.davidwesst.com/2015/08/Running-Tomcat-Apps-on-Docker-through-Eclipse/" target="_blank" rel="noopener" class='originalurl'>http://blog.davidwesst.com/2015/08/Running-Tomcat-Apps-on-Docker-through-Eclipse/</a></p>



			<div id="mainPostContent">
	        <p>If you didn't already know, <a href="https://www.docker.com" target="_blank" rel="noopener">Docker</a> is pretty cool. Not sure what it is? My fellow Western Dev <a href="http://www.westerndevs.com/docker-is-coming-whether-you-like-it-or-not/" target="_blank" rel="noopener">Kyle Baley</a> explains it really well and provides some great cases about why Docker is fantastic.</p>
<p>This post is an example of Docker being fantastic and should be considered a warm-up to Docker.</p>
<a id="more"></a>
<p>Although I'm talking Tomcat and Eclipse, this idea can be used with pretty much any combination of technologies available through Docker and your development environment of choice.</p>
<h2>Context</h2>
<p>When I dive into the code, I don't want to have to worry about running some version of Tomcat on my development machine.</p>
<p>Docker can solve that.</p>
<p>I also don't like obscuring part of my solution through <em>IDE Magic</em>, such that when I run my Tomcat application I want to know how it's running. In fact, not only do I want to know <em>how</em> it runs, but I want the steps to run the application to be automated so I don't have to think about it. I know Eclipse can do this natively, but because I'm not looking to run Tomcat on my machine, it adds some challenges.</p>
<p>Here's what I did.</p>
<h2>Solution</h2>
<p>The solution is a simple one, but it works consistently. Plus, we'll even integrate it with Eclipse so people that don't like leaving their IDE can continue to code in in their comfort zone.</p>
<p>I am assuming that you...</p>
<ul>
<li>...are running Windows</li>
<li>...have a Maven web app project</li>
<li>...have setup Boot2Docker</li>
<li>...have a linux-flavoured shell (like Git Bash)</li>
</ul>
<p>Maven gives us a standard structure for our project. More specifically, it packages everything up into the <code>/target</code> directory so that we can map the volume to our docker image.</p>
<p>Now, let's make this run every time.</p>
<h3>The Start Script</h3>
<p>The first script I created just packages things up, makes sure boot2docker is running, and runs docker.</p>
<p>Being that I run the script from the project root, it looks like this:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># package the WAR file</span></span><br><span class="line">mvn package</span><br><span class="line"></span><br><span class="line"><span class="comment"># Make sure docker instance is running</span></span><br><span class="line">boot2docker up</span><br><span class="line"></span><br><span class="line"><span class="comment"># Run the application</span></span><br><span class="line">docker run --rm -p 8080:8080 -v //./target/mywebapp:/usr/<span class="built_in">local</span>/tomcat/webapps/mywebapp tomcat:6.0</span><br></pre></td></tr></table></figure>
<h3>The Stop Script</h3>
<p>Thanks to the power of Bingoogle, I was able to find <a href="https://coderwall.com/p/ewk0mq/stop-remove-all-docker-containers" target="_blank" rel="noopener">this</a>.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker stop $(docker ps -a -q)</span><br></pre></td></tr></table></figure>
<p>And there are my scripts to start and stop my application. The main reason for creating these is to make sure that anyone pulling down the solution can be productive. Even those that like staying inside of Eclipse all the time.</p>
<h3>Integrating with Eclipse</h3>
<p>Because we have these scripts, we can setup a couple of &quot;External Tools&quot; to start and stop at the push of a button.</p>
<p><img src="http://blog.davidwesst.com/2015/08/Running-Tomcat-Apps-on-Docker-through-Eclipse/1-externaltoolsbutton.png" alt=""></p>
<p>To set it up, click the button or the drop down and select &quot;External Tools Configuration&quot;, then setup a couple of programs where you call sh.exe (provided with Git Bash) and our new scripts as the arguments.</p>
<p><img src="http://blog.davidwesst.com/2015/08/Running-Tomcat-Apps-on-Docker-through-Eclipse/2-configwindow.png" alt=""></p>
<p>Now everybody can start and stop at their leisure. Plus, if we need to add more complexity to starting and stopping, we can just extend the scripts.</p>
<h3>Alternatively...Make a Dockerfile</h3>
<p>That being said, we could also customize our docker image to include files right on the image rather than mapping volumes. Although this doesn't add any value to this example, it might later on if we want to start customizing our Tomcat server to include multiple files or other libraries that our application will need.</p>
<p><strong>FUN FACT:</strong> Copying the files over to the image means that you can't do any debugging on them in your environment right away, as opposed to if you were to map the files locally. Not a big deal in some cases, but I like to keep all the doors open for debugging.</p>
<p>Here's an example, but you can get the full scoop on dockerfiles <a href="https://docs.docker.com/articles/dockerfile_best-practices/" target="_blank" rel="noopener">here</a>:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">FROM tomcat:6.0</span><br><span class="line">MAINTAINER David Wesst &lt;questions@davidwesst.com&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># add our WAR files</span></span><br><span class="line">ADD target/\*.war /usr/<span class="built_in">local</span>/tomcat/webapps/</span><br></pre></td></tr></table></figure>
<p>Then we need to update our <code>start-docker.sh</code> file from above to build the new image so we can run it.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># package the WAR file</span></span><br><span class="line">mvn package</span><br><span class="line"></span><br><span class="line"><span class="comment"># Make sure docker instance is running</span></span><br><span class="line">boot2docker up</span><br><span class="line"></span><br><span class="line"><span class="comment"># Build a new docker image</span></span><br><span class="line">docker build -t davidwesst/tomcatsample:dev .</span><br><span class="line"></span><br><span class="line"><span class="comment"># Run the application</span></span><br><span class="line">docker run --rm -p 8080:8080 umanitoba/tomcatsample:dev</span><br></pre></td></tr></table></figure>
<h3>The Point</h3>
<p>This is a pretty straightforward example on how to use docker, and how to tie it into any processes or IDEs that you may have. I know that <a href="http://www.eclipse.org/community/eclipse_newsletter/2015/june/article3.php" target="_blank" rel="noopener">Eclipse Mars has functionality for docker</a>, but sometimes we don't get to use the shiny new toy and need to stick with the old realiable ones. This solution works with Eclipse Luna, and below from what I can gather, so people that are stuck using older IDEs can still enjoy Docker.</p>
<p>...but you should really get comfortable with the command line and <a href="http://blog.davidwesst.com/talks/" target="_blank" rel="noopener">Learn to be IDE Free (Shameless Self Promotion)</a>.</p>
<p>--
Thanks for Playing
~ DW</p>

	        </div>

            
            <section id="comments">
            <div id="disqus_thread">
                <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript" target="_blank" rel="noopener">comments powered by Disqus.</a></noscript>
            </div>
            </section>
            
		</div>
	</div>
<!--MAIN CONTENT ENDS-->

<!--SIDEBAR CONTENT STARTS-->
	<div class="SubpageBoxSubSm">
		<div class="SubpageBoxSubSmContent">
			
			

			<div class="ProfileImg">
				
				<a href="/bios/david_wesst">
				
					<img src='/images/avatars/davidwesst_400x400.jpg' />
				
				</a>
				
			</div>

			<BR clear="all">

			<h2><a href="/bios/david_wesst">David Wesst</a></h2>
			
			<a href="mailto:questions@davidwesst.com"><img class="ProfileIcon" src="/images/icon_email.png" border="0" alt="Email" title="Email"> Email</a><BR>
			
			
			<a href="http://www.davidwesst.com" target="_blank"><img class="ProfileIcon" src="/images/icon_web.png" border="0" alt="Web" title="Web"> Web</a><BR>
			
			
			<a href="http://twitter.com/davidwesst" target="_blank"><img class="ProfileIcon" src="/images/icon_twitter.png" border="0" alt="Twitter" title="Twitter"> Twitter</a><BR>
			
			
			<a href="https://github.com/davidwesst" target="_blank"><img class="ProfileIcon" src="/images/icon_github.png" border="0" alt="GitHub" title="GitHub"> GitHub</a><br>
			
			
			<a href="https://www.linkedin.com/in/davidwesst" target="_blank"><img class="ProfileIcon" src="/images/icon_linkedin.png" border="0" alt="LinkedIN" title="LinkedIN"> LinkedIn</a><br>
			
			
 			<a href="/feeds/david_wesst.xml"><img class="ProfileIcon" src="/images/icon_subscribe.png" /> RSS</a>
			

			<hr />
			<h4>Looking for someone else?</h4>
			<p>You can find the rest of the Western Devs Crew <a href="/whoweare">here</a>.</p>
		</div>
	</div>
<!--SIDEBAR CONTENT ENDS-->


</div>
</center>
<!--PAGE CONTENT ENDS-->


<!--FOOTER STARTS-->
<center>
  <div class="FooterBarTxt">&copy; 2015 Western Devs. All Rights Reserved. Design by <a href="http://www.karenchudobiak.ca" target="_blank">Karen Chudobiak, Graphic Designer</a></div>
</center>
<!--FOOTER ENDS-->

<!-- NAV FOOTER STARTS -->
<div class="NavFooter">
  <a href="/posts" alt="Posts"><i class="fa fa-newspaper-o fa-2x"></i><span>Posts</span></a>
  <a href="/podcasts" alt="Podcasts"><i class="fa fa-volume-up fa-2x"></i><span>Podcasts</span></a>
  <a href="/whoweare" alt="About"><i class="fa fa-star fa-2x"></i><span>About</span></a>
  <a href="/whatwevedone" alt="What We've Done"><i class="fa fa-trophy fa-2x"></i><span>Work</span></a>
  <a href="/speaking" alt="Speaking"><i class="fa fa-comment-o fa-2x fa-flip-horizontal"></i><span>Speaking</span></a>
</div>
<!-- NAV FOOTER ENDS -->




</div>
<!--WRAPPER ENDS-->


<script>
  var disqus_shortname = 'westerndevs';
  
  var disqus_url = 'https://westerndevs.com/_/running-tomcat-apps-on-docker-through-eclipse/'.replace(".com//", ".com/");
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
  
function shuffle(array) {
  var currentIndex = array.length, temporaryValue, randomIndex;

  // While there remain elements to shuffle...
  while (0 !== currentIndex) {

    // Pick a remaining element...
    randomIndex = Math.floor(Math.random() * currentIndex);
    currentIndex -= 1;

    // And swap it with the current element.
    temporaryValue = array[currentIndex];
    array[currentIndex] = array[randomIndex];
    array[randomIndex] = temporaryValue;
  }

  return array;
}

</script>


</body>

  
<!-- Google Analytics -->
<script type="text/javascript">
if (document.location.hostname.search("westerndevs.com") !== -1 || document.location.hostname.search("www.westerndevs.com") !== -1) {
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-37617956-2', 'auto');

ga('set', 'contentGroup1', 'david_wesst');

ga('send', 'pageview');
}
</script>
<!-- End Google Analytics -->



</html>
