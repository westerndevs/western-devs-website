<!DOCTYPE html>
<html lang="en" xml:lang="en">

  <head>
  
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Continuous Integration With Xamarin.iOS, Visual Studio Team Services, and MacinCloud: Part 1 | Western Devs</title>
  <meta name="description" content="Recently, Microsoft and MacinCloud announced a partnership in which they have enabled Visual Studio Team Services (VSTS) to support continuous integration (CI) builds for Xamarin.iOS and XCode project">
<meta property="og:type" content="article">
<meta property="og:title" content="Continuous Integration With Xamarin.iOS, Visual Studio Team Services, and MacinCloud: Part 1">
<meta property="og:url" content="https://westerndevs.com/_/continuous-integration-with-xamarin-ios-visual-studio-team-services-and-macincloud-part-1/index.html">
<meta property="og:site_name" content="Western Devs">
<meta property="og:description" content="Recently, Microsoft and MacinCloud announced a partnership in which they have enabled Visual Studio Team Services (VSTS) to support continuous integration (CI) builds for Xamarin.iOS and XCode project">
<meta property="og:image" content="http://solola.ca/wp-content/uploads/2015/12/1-MIC_Dashboard-1024x219.png">
<meta property="og:image" content="http://solola.ca/wp-content/uploads/2015/12/2-MIC_EditVSTSAgent-1024x931.png">
<meta property="og:image" content="http://solola.ca/wp-content/uploads/2015/12/3-VSTS_Security_AccessToken-1024x617.png">
<meta property="og:image" content="http://solola.ca/wp-content/uploads/2015/12/4-VSTS_AgentPools-1024x368.png">
<meta property="article:published_time" content="2015-12-11T01:38:11.000Z">
<meta property="article:modified_time" content="2024-11-14T13:42:27.620Z">
<meta property="article:author" content="Western Devs">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://solola.ca/wp-content/uploads/2015/12/1-MIC_Dashboard-1024x219.png">
<meta name="twitter:creator" content="@westerndevs">

    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="title" content="WesternDevs">   
    <meta name="keywords" content="software development,software,asp.net,blog">
    <meta name="description" content="We're all west of somewhere">
    <meta name="copyright" content="WesternDevs">
    <meta name="revisit-after" content="15 days">
    <meta name="robots" content="all">
    <meta name="MSSmartTagsPreventParsing" content="true">
  
    <link rel="canonical" href="http://solola.ca/xamarin-macincloud-vsts-part1/">
  
  
    <link rel="alternate" href="/feed.xml" title="Western Devs" type="application/atom+xml">
  
  
<link rel="stylesheet" href="/css/style.css">

      
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <script src="//code.jquery.com/jquery-1.11.3.min.js"></script>  
  <meta name="generator" content="Hexo 4.2.1"></head>

<body>

<!-- FIXED HEADER BECAUSE SCROLLING -->
<!--HEADER STARTS-->
<div class="WrapperHeader">
<div style="display:inline-block; text-align: center;">
<div class="Header">

  <div class="HeaderLogo">
    <a href="/"><img src="/images/header_logo_transparent.png" alt="WesternDevs" title="WesternDevs" border="0" style="width: 206px; height: 64px;" width="206" height="64"></a>
  </div>

  <div class="HeaderLinks">
      <a href="/posts" class="nav">POSTS</a>       
      <a href="/podcasts" class="nav">PODCASTS</a>       
      <a href="/whoweare" class="nav">ABOUT</a>  
      <a href="/whatwevedone" class="nav">WHAT WE'VE DONE</a>  
      <a href="/speaking" class="nav">SPEAKING</a>
      <div class="HeaderIcons">
        <a href="mailto:info@westerndevs.com"><img src="/images/icon_email.png" border="0" alt="Email" title="Email" height="26" width="26"></a>
        <a href="/feed.xml"><img src="/images/icon_subscribe.png" border="0" alt="Subscribe" title="Subscribe" height="26" width="27"></a>
        <a href="http://twitter.com/westerndevs" target="_blank"><img src="/images/icon_twitter.png" border="0" alt="Twitter" title="Twitter" height="26" width="27"></a>
        <a href="http://github.com/westerndevs" target="_blank"><img src="/images/icon_github.png" border="0" alt="GitHub" title="GitHub" height="26" width="27"></a>     
      </div>
  </div>
  
</div>
</div>
</div>
<!--HEADER ENDS-->    



<!--WRAPPER STARTS-->
<div class="Wrapper" style="">

<!--SUBHEAD STARTS-->
<div class="WrapperSubHeaderSubpage">
<center>
	<div class="SubHeader">
		<H1 class="title"><img class="icon" src="/images/icon_posts.png" alt="POST" title="POST" border="0"> POST</H1>
	</div>
</center>
</div>
<!--SUBHEAD ENDS-->

<!--PAGE CONTENT STARTS-->
<center>
<div class="WrapperContent">

<!--MAIN CONTENT STARTS-->
	<div class="SubpageBoxSubLrg">
		<div class="SubpageBoxSubLrgContent">
		    <div class='postTitle'>
  <div class="ListLrgDateBG">
    <div class="ListLrgDateMonth">DEC</div>
    <div class="ListLrgDateDay">11</div>
    <div class="ListLrgDateYear">2015</div>
  </div>
  <h2>Continuous Integration With Xamarin.iOS, Visual Studio Team Services, and MacinCloud: Part 1</h2>
</div>

		    

<p class="TXTsm">ORIGINALLY POSTED TO: <a href="http://solola.ca/xamarin-macincloud-vsts-part1/" target="_blank" rel="noopener" class='originalurl'>http://solola.ca/xamarin-macincloud-vsts-part1/</a></p>



			<div id="mainPostContent">
	        <p>Recently, Microsoft and MacinCloud announced a partnership in which they have enabled Visual Studio Team Services (VSTS) to support continuous integration (CI) builds for Xamarin.iOS and XCode projects using a Mac build agent in the cloud. This is great news as more companies are looking to move towards cloud-hosted solutions for their build and deployment pipeline.</p>
<!--more-->
<p>Although MacinCloud indicates that the <a href="http://www.macincloud.com/pricing/build-agent-plans/vso-build-agent-plan" target="_blank" rel="noopener">VSTS Agent Plan setup</a> only takes a few minutes, the process is not fully automated and requires some manual steps in order to get your CI Builds working as expected. The initial setup is fairly quick, but your Xamarin.iOS CI builds will fail until you install a <a href="http://xamarin.com" target="_blank" rel="noopener">Xamarin </a>license on the MacinCloud CI Build Server. The catch? Unlike the other MacinCloud plans, the CI Build Agent Plan does not allow you to directly interact with the Build Server. Instead, you are required to contact both MacinCloud Support and Xamarin Support to complete the process. Set your expectations that it may take anywhere from 2 – 4 days before you can start using the CI Build Agent.</p>
<p>Let's take a look at what is involved, from start to finish, to successfully configure a CI Build Agent for your Xamarin.iOS projects.</p>
<h3>Step 1: Register for MacinCloud plan</h3>
<p>In order to integrate Macincloud with Visual Studio Team Services, you need to register for a <a href="http://www.macincloud.com/pricing/compare" target="_blank" rel="noopener">CI Build Agent plan</a> at <a href="http://www.macincloud.com/" target="_blank" rel="noopener">MacinCloud.com</a>. The CI Build Agent cost is $29 US per month per build agent.</p>
<h3>Step 2: Create a new VSTS Agent</h3>
<p>Once you are registered, you must setup your build agent through the Dashboard, as shown below.</p>
<p><img src="http://solola.ca/wp-content/uploads/2015/12/1-MIC_Dashboard-1024x219.png" alt=""></p>
<p><em>MacinCloud Dashboard</em></p>
<p>Select the Edit button to configure your MacinCloud VSTS Agent.</p>
<h3>Step 3: Associate the MacinCloud Build Agent to your VSTS Account</h3>
<p>In the Edit VSTS Agent dialog, enter a unique agent name and a pool name. Note that the pool name must match the name of an Agent Pool in Visual Studio Team Services.</p>
<p><img src="http://solola.ca/wp-content/uploads/2015/12/2-MIC_EditVSTSAgent-1024x931.png" alt=""></p>
<p><em>MacinCloud Edit VSTS Agent Dialog</em></p>
<p>Enter your VSTS URL to associate this build agent with your Team Services account.</p>
<h3>Step 4: Generate a Microsoft Access Token in VSTS for the Build Agent</h3>
<p>Next, you will need to provide the MacinCloud Build Agent access to your VSTS account, which requires that you generate a Microsoft Access Token from your VSTS profile.</p>
<p>To do this, open a new browser tab, log into your VSTS account and navigate to the security tab for your account profile. Alternatively you can click the &quot;?&quot; button situated to the right of the Microsoft Access Token entry field in the Edit VSTS Agent dialog, which will launch the &quot;Create a personal access token&quot; page in your VSTS Dashboard. Provide a Description, and then select an Expiry term as well as the desired VSTS Account. Ensure <strong>All scopes</strong> is selected for Authorized Scopes then click the <em>Create Token</em> button.</p>
<p><img src="http://solola.ca/wp-content/uploads/2015/12/3-VSTS_Security_AccessToken-1024x617.png" alt=""></p>
<p><em>VSTS Dashboard – Create a personal access token</em></p>
<h3>Step 5: Enter the Microsoft Access Token in the MacinCloud Edit VSTS Agent dialog</h3>
<p>Copy the generated access token to the clipboard and paste it in the MacinCloud Microsoft Access Token field in the Edit VSTS Agent dialog.</p>
<p><strong>Important Note:</strong> Be sure to save a copy of the generated access token in a safe location. You will not be able to retrieve the generated access token again once you navigate away from the Security page after it has been created.</p>
<p>If you wish, you can add your signing certificate and provisioning profile at this time, but it's not required in the initial setup.</p>
<p>Click <em>Save</em> to create your MacinCloud CI Build Agent.</p>
<h3>Step 6: Confirm that the MacinCloud Agent appears in the VSTS Agent Pool</h3>
<p>Navigate to the Admin section within your VSTS Dashboard and select the Agent Pools tab. Select the Agent Pool that matches the Pool Name you entered in the MacinCloud Edit VSTS Agent dialog. If everything is configured properly, then the MacinCloud agent will appear in the Agents list, as shown below.</p>
<p><img src="http://solola.ca/wp-content/uploads/2015/12/4-VSTS_AgentPools-1024x368.png" alt=""></p>
<p><em>MacinCloud VSTS Agent associated with Default Agent Pool in VSTS</em></p>
<h3>Step 7: Install Xamarin License on the Mac Server </h3>
<p>Last but not least, you will need to install a Xamarin license on the Mac server where your CI Build Agent is hosted. Unfortunately, MacinCloud does not provide you with interactive access to the server. This requires some back and forth correspondence with MacinCloud Support and Xamarin Support in order to finish the setup process.</p>
<h3>Step 7a: Request System Profile Information from MacinCloud Support</h3>
<p>First, you will need to submit a support request to MacinCloud to obtain the server information and system file that Xamarin will require in order to generate a license file for your CI Build Server.</p>
<p>Send an email to <a href="mailto:support@macincloud.com">support@macincloud.com</a> with the following request:</p>
<p>&quot;I am setting up a CI Build Agent to configure continuous integration builds in Visual Studio Team Services for Xamarin.iOS applications. Please send me the system profile of my CI Build Agent, which I will need to forward to Xamarin support so they can generate a License file. To retrieve the system profile, perform the following steps:</p>
<p>– Go to: Macintosh HD -&gt; Applications -&gt; Utilities -&gt; System Information.app</p>
<p>– Choose File &gt; Save</p>
<p>– Select a location to save the file, such as the desktop, or Documents folder.</p>
<p>– Name and save the file.</p>
<p>– Please email the file to me when this is completed.&quot;</p>
<p>This initial email will generate a support ticket within the <a href="http://support.macincloud.com/support/home" target="_blank" rel="noopener">MacinCloud Support Portal</a>. You will receive an email containing a link to the support request so you can view its status at any time.</p>
<p>Note that response time from MacinCloud Support will vary, with the expectation that it can take anywhere from a couple of hours to 1 full business day to receive a response depending on the time of day that you submit the request.</p>
<p>The generated system profile information file will simply be an xml file with a <em>.spx</em> extension.</p>
<h3>Step 7b: Request a license from Xamarin Support</h3>
<p>Once you receive the system profile information file from MacinCloud Support, you will need to send it to Xamarin Support. Log into your <a href="https://xamarin.com/account/login" target="_blank" rel="noopener">Xamarin account</a>, go to your Dashboard and select <a href="https://store.xamarin.com/account/my/subscription?product=Xamarin.iOS" target="_blank" rel="noopener">Xamarin.iOS</a> to locate the support email address for your subscription.</p>
<p>Send an email to the Xamarin Support using the specified email address, requesting a <em><strong>License.V2</strong></em> file to be generated for your MacinCloud CI Build Agent. Be sure to attach the <em>spx</em> file that you received from MacinCloud to this request.</p>
<p>Xamarin Support will provide you with the license file and instructions on where the file should be placed on the server. The Xamarin.iOS license file must be copied to the ~/Library/MonoTouch folder on the build server.</p>
<p>I found the turnaround time on this request to be relatively quick.</p>
<h3>Step 7c: Forward the license to MacinCloud Support</h3>
<p>Forward the license file and relevant instructions to MacinCloud Support, and wait until they send a confirmation that the license has been installed on the server.</p>
<p><strong><em>To Be Continued...</em></strong></p>
<p>Now that you have the MacinCloud CI Build Agent properly configured, you will be able to setup continuous integration builds for your Xamarin.iOS projects! In the next post, we will walk through the necessary steps to create a Xamarin.iOS build definition in Visual Studio Team Services.</p>
<p> </p>
<p> </p>

	        </div>

            
            <section id="comments">
            <div id="disqus_thread">
                <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript" target="_blank" rel="noopener">comments powered by Disqus.</a></noscript>
            </div>
            </section>
            
		</div>
	</div>
<!--MAIN CONTENT ENDS-->

<!--SIDEBAR CONTENT STARTS-->
	<div class="SubpageBoxSubSm">
		<div class="SubpageBoxSubSmContent">
			
			

			<div class="ProfileImg">
				
				<a href="/bios/lori_lalonde">
				
					<img src='/images/avatars/Lori_Lalonde.jpg' />
				
				</a>
				
			</div>

			<BR clear="all">

			<h2><a href="/bios/lori_lalonde">Lori Lalonde</a></h2>
			
			<a href="mailto:loriblalonde@gmail.com"><img class="ProfileIcon" src="/images/icon_email.png" border="0" alt="Email" title="Email"> Email</a><BR>
			
			
			<a href="https://loriblalonde.com" target="_blank"><img class="ProfileIcon" src="/images/icon_web.png" border="0" alt="Web" title="Web"> Web</a><BR>
			
			
			<a href="http://twitter.com/loriblalonde" target="_blank"><img class="ProfileIcon" src="/images/icon_twitter.png" border="0" alt="Twitter" title="Twitter"> Twitter</a><BR>
			
			
			<a href="https://github.com/llalonde" target="_blank"><img class="ProfileIcon" src="/images/icon_github.png" border="0" alt="GitHub" title="GitHub"> GitHub</a><br>
			
			
			<a href="https://www.linkedin.com/in/lorilalonde" target="_blank"><img class="ProfileIcon" src="/images/icon_linkedin.png" border="0" alt="LinkedIN" title="LinkedIN"> LinkedIn</a><br>
			
			
 			<a href="/feeds/lori_lalonde.xml"><img class="ProfileIcon" src="/images/icon_subscribe.png" /> RSS</a>
			

			<hr />
			<h4>Looking for someone else?</h4>
			<p>You can find the rest of the Western Devs Crew <a href="/whoweare">here</a>.</p>
		</div>
	</div>
<!--SIDEBAR CONTENT ENDS-->


</div>
</center>
<!--PAGE CONTENT ENDS-->


<!--FOOTER STARTS-->
<center>
  <div class="FooterBarTxt">&copy; 2015 Western Devs. All Rights Reserved. Design by <a href="http://www.karenchudobiak.ca" target="_blank">Karen Chudobiak, Graphic Designer</a></div>
</center>
<!--FOOTER ENDS-->

<!-- NAV FOOTER STARTS -->
<div class="NavFooter">
  <a href="/posts" alt="Posts"><i class="fa fa-newspaper-o fa-2x"></i><span>Posts</span></a>
  <a href="/podcasts" alt="Podcasts"><i class="fa fa-volume-up fa-2x"></i><span>Podcasts</span></a>
  <a href="/whoweare" alt="About"><i class="fa fa-star fa-2x"></i><span>About</span></a>
  <a href="/whatwevedone" alt="What We've Done"><i class="fa fa-trophy fa-2x"></i><span>Work</span></a>
  <a href="/speaking" alt="Speaking"><i class="fa fa-comment-o fa-2x fa-flip-horizontal"></i><span>Speaking</span></a>
</div>
<!-- NAV FOOTER ENDS -->




</div>
<!--WRAPPER ENDS-->


<script>
  var disqus_shortname = 'westerndevs';
  
  var disqus_url = 'https://westerndevs.com/_/continuous-integration-with-xamarin-ios-visual-studio-team-services-and-macincloud-part-1/'.replace(".com//", ".com/");
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
  
function shuffle(array) {
  var currentIndex = array.length, temporaryValue, randomIndex;

  // While there remain elements to shuffle...
  while (0 !== currentIndex) {

    // Pick a remaining element...
    randomIndex = Math.floor(Math.random() * currentIndex);
    currentIndex -= 1;

    // And swap it with the current element.
    temporaryValue = array[currentIndex];
    array[currentIndex] = array[randomIndex];
    array[randomIndex] = temporaryValue;
  }

  return array;
}

</script>


</body>

  
<!-- Google Analytics -->
<script type="text/javascript">
if (document.location.hostname.search("westerndevs.com") !== -1 || document.location.hostname.search("www.westerndevs.com") !== -1) {
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-37617956-2', 'auto');

ga('set', 'contentGroup1', 'lori_lalonde');

ga('send', 'pageview');
}
</script>
<!-- End Google Analytics -->



</html>
