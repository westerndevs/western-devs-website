<!DOCTYPE html>
<html lang="en" xml:lang="en">

  <head>
  
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>How to Use Highlight.Js with Bower and Gulp | Western Devs</title>
  <meta name="description" content="One of the best libraries I&#39;ve seen for syntax highlighting on the web is highlight.js, IMHO. The catch to using the library is that it takes a bit more effort to setup than just adding a script tag a">
<meta property="og:type" content="article">
<meta property="og:title" content="How to Use Highlight.Js with Bower and Gulp">
<meta property="og:url" content="https://westerndevs.com/_/How-to-Use-Highlight-Js-with-Bower-and-Gulp/index.html">
<meta property="og:site_name" content="Western Devs">
<meta property="og:description" content="One of the best libraries I&#39;ve seen for syntax highlighting on the web is highlight.js, IMHO. The catch to using the library is that it takes a bit more effort to setup than just adding a script tag a">
<meta property="article:published_time" content="2016-08-29T14:07:11.000Z">
<meta property="article:modified_time" content="2022-05-08T23:08:21.176Z">
<meta property="article:author" content="Western Devs">
<meta property="article:tag" content="gulp">
<meta property="article:tag" content="bower">
<meta property="article:tag" content="highlight.js">
<meta property="article:tag" content="javascript">
<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@westerndevs">

    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="title" content="WesternDevs">   
    <meta name="keywords" content="software development,software,asp.net,blog">
    <meta name="description" content="We're all west of somewhere">
    <meta name="copyright" content="WesternDevs">
    <meta name="revisit-after" content="15 days">
    <meta name="robots" content="all">
    <meta name="MSSmartTagsPreventParsing" content="true">
  
    <link rel="canonical" href="https://blog.davidwesst.com/2016/08/How-to-Use-HighlightJs-with-Bower-and-Gulp/">
  
  
    <link rel="alternate" href="/feed.xml" title="Western Devs" type="application/atom+xml">
  
  
<link rel="stylesheet" href="/css/style.css">

      
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <script src="//code.jquery.com/jquery-1.11.3.min.js"></script>  
  <meta name="generator" content="Hexo 4.2.1"></head>

<body>

<!-- FIXED HEADER BECAUSE SCROLLING -->
<!--HEADER STARTS-->
<div class="WrapperHeader">
<div style="display:inline-block; text-align: center;">
<div class="Header">

  <div class="HeaderLogo">
    <a href="/"><img src="/images/header_logo_transparent.png" alt="WesternDevs" title="WesternDevs" border="0" style="width: 206px; height: 64px;" width="206" height="64"></a>
  </div>

  <div class="HeaderLinks">
      <a href="/posts" class="nav">POSTS</a>       
      <a href="/podcasts" class="nav">PODCASTS</a>       
      <a href="/whoweare" class="nav">ABOUT</a>  
      <a href="/whatwevedone" class="nav">WHAT WE'VE DONE</a>  
      <a href="/speaking" class="nav">SPEAKING</a>
      <div class="HeaderIcons">
        <a href="mailto:info@westerndevs.com"><img src="/images/icon_email.png" border="0" alt="Email" title="Email" height="26" width="26"></a>
        <a href="/feed.xml"><img src="/images/icon_subscribe.png" border="0" alt="Subscribe" title="Subscribe" height="26" width="27"></a>
        <a href="http://twitter.com/westerndevs" target="_blank"><img src="/images/icon_twitter.png" border="0" alt="Twitter" title="Twitter" height="26" width="27"></a>
        <a href="http://github.com/westerndevs" target="_blank"><img src="/images/icon_github.png" border="0" alt="GitHub" title="GitHub" height="26" width="27"></a>     
      </div>
  </div>
  
</div>
</div>
</div>
<!--HEADER ENDS-->    



<!--WRAPPER STARTS-->
<div class="Wrapper" style="">

<!--SUBHEAD STARTS-->
<div class="WrapperSubHeaderSubpage">
<center>
	<div class="SubHeader">
		<H1 class="title"><img class="icon" src="/images/icon_posts.png" alt="POST" title="POST" border="0"> POST</H1>
	</div>
</center>
</div>
<!--SUBHEAD ENDS-->

<!--PAGE CONTENT STARTS-->
<center>
<div class="WrapperContent">

<!--MAIN CONTENT STARTS-->
	<div class="SubpageBoxSubLrg">
		<div class="SubpageBoxSubLrgContent">
		    <div class='postTitle'>
  <div class="ListLrgDateBG">
    <div class="ListLrgDateMonth">AUG</div>
    <div class="ListLrgDateDay">29</div>
    <div class="ListLrgDateYear">2016</div>
  </div>
  <h2>How to Use Highlight.Js with Bower and Gulp</h2>
</div>

		    

<p class="TXTsm">ORIGINALLY POSTED TO: <a href="https://blog.davidwesst.com/2016/08/How-to-Use-HighlightJs-with-Bower-and-Gulp/" target="_blank" rel="noopener" class='originalurl'>https://blog.davidwesst.com/2016/08/How-to-Use-HighlightJs-with-Bower-and-Gulp/</a></p>



			<div id="mainPostContent">
	        <p>One of the challenges I faced when getting my new blog theme up and running was getting <a href="https://highlightjs.org" target="_blank" rel="noopener">highlight.js</a> working as I wanted it to. The library has support for a riduculous number of languages, and provides theming capabilities, so it was the clear choice when it came to syntax highlighting for the web. The challenge is that tt's not just adding simple script tag and you're done with it. They seem to expect you to know what you're doing when consuming the library.</p>
<p>Remember: this is a <em>good thing</em>.</p>
<p>If you're only include code snippets for HTML and JavaScript, why would you want to bring down the stylesheets for D, Erlang, and ActionScript too? Same goes for the themes too. You're likely going to pick a single theme and go with it, and not need all 77 they include. Because of the size of highlight.js, bringing it all down to the client would have a significant impact on your site's performance.</p>
<p>Lucky for us, the folks in charge of highlight.js have given us all the tools we need to make using the library in our application nice and performant. In my case, I use <a href="https://bower.io" target="_blank" rel="noopener">Bower</a> as my package manager and <a href="http://gulpjs.com" target="_blank" rel="noopener">Gulp</a> as my build system, which worked well once I figured out what I was doing. Let me walk you though it.</p>
<h2>Installing Highlight.js with Bower</h2>
<p>To start, you'll need to add highlight.js to your project using Bower.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bower install --save highligh.js.origin</span><br></pre></td></tr></table></figure>
<p>Generally speaking, after you install a package from Bower you have a ready-to-use JavaScript library. With highlight.js, this is not the case. Rather, you are left with source code ready to be built as you need it. To do that, we are going to use Gulp.</p>
<h2>Building Highlight.js with Gulp</h2>
<p>The hard work has already been done by the highlight.js team, as they have already included a lovely build tool for us to use. You can read about the details <a href="http://highlightjs.readthedocs.io/en/latest/building-testing.html" target="_blank" rel="noopener">here in the building and testing documentation</a>.</p>
<p>There are two parts to &quot;building&quot; highlight.js: the JavaScript and the stylesheets. We'll be creating a task for each of them.</p>
<h3>Building highlight.js JavaScript</h3>
<p>Let's start with the JavaScript component.</p>
<p>If you read the <a href="http://highlightjs.readthedocs.io/en/latest/building-testing.html" target="_blank" rel="noopener">docs</a> earlier, you know that there is a NodeJS script in the <code>tools</code> directory that will do all the heavy lifting. All we need to do in our Gulp task is use that script.</p>
<p>Here's my Gulp task:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">gulp.task(<span class="string">'process-highlightjs-script'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">callback</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> command = <span class="string">'cd bower_components/highlight.js.origin'</span></span><br><span class="line">                    + <span class="string">' &amp;&amp; npm install'</span> </span><br><span class="line">                    + <span class="string">' &amp;&amp; node tools/build :common'</span>;</span><br><span class="line">    exec(command, (err, stdout, stderr)=&gt; &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(stderr);</span><br><span class="line">        <span class="built_in">console</span>.log(stdout);</span><br><span class="line"></span><br><span class="line">        callback(err);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>It looks a little strange for a gulp task, but all I'm doing is executing a shell command using the <a href="https://nodejs.org/api/child_process.html#child_process_child_process_exec_command_options_callback" target="_blank" rel="noopener"><code>exec</code></a> in NodeJS to spawn a child process. The important part is in the <code>command</code> variable. Let's walk through it.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> bower_components/highlight.js.origin</span><br></pre></td></tr></table></figure>
<p>First, I'm moving into the root directory of the highligh.js.origin package we previously installed using Bower.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install</span><br></pre></td></tr></table></figure>
<p>Then, I'm installing the dependencies that are needed by the provided build tool.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node tools/build :common</span><br></pre></td></tr></table></figure>
<p>Finally, I'm running the build command as specified in the documentation. This part should be changed to make sure it includes the languages you want to display in your application. Details are in their <a href="http://highlightjs.readthedocs.io/en/latest/building-testing.html" target="_blank" rel="noopener">documentation</a>.</p>
<p>The rest is just outputting the standard out and standard error streams to the console, and calling the Gulp callback to make sure we come back to our original process, as per the <a href="https://github.com/gulpjs/gulp/blob/master/docs/API.md#async-task-support" target="_blank" rel="noopener">Gulp documentation</a>.</p>
<p>If everything is done correctly, you should have a new <code>build</code> folder in the <code>highlight.js.origin</code> folder that contains your newly build library.</p>
<h2>Building Highlight.js Themes for SASS</h2>
<p>I suppose this part is optional, but it shouldn't be.</p>
<p>To make optimize your site, you should be minimizing the number of requests that the client browser needs to make to get all the required resources for your application. For styling, that involves concatenanting all of your styles and style libraries into a single file.</p>
<p>To do this, I use <a href="http://sass-lang.com" target="_blank" rel="noopener">SASS</a> or, more specifically, <a href="https://www.npmjs.com/package/gulp-sass" target="_blank" rel="noopener">gulp-sass</a> to build all of my stylesheets and combine them into a single CSS file as described by the <a href="http://sass-lang.com/guide#topic-5" target="_blank" rel="noopener">SASS documentation</a>. I'm going to assume that you're doing the same, or at least something similar in your application that will be using highlight.js.</p>
<p>Because SASS only handles combining other <code>scss</code> files, I copy the theme stylesheet into a newly named <code>scss</code> file. Here's my gulp task for that:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">gulp.task(<span class="string">'process-highlightjs-style'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> stylesheets = [</span><br><span class="line">        <span class="string">'./bower_components/highlight.js.origin/src/styles/atom-one-dark.css'</span></span><br><span class="line">    ];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> gulp.src(stylesheets)</span><br><span class="line">            .pipe(rename(<span class="string">'highlight.js.scss'</span>))</span><br><span class="line">            .pipe(gulp.dest(<span class="string">'./bower_components/highlight.js.origin/scss'</span>));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>Then in my main stylesheet, I include:</p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@import</span> <span class="string">'../../bower_components/highlight.js.origin/scss/highlight.js'</span>;</span><br></pre></td></tr></table></figure>
<p>This will bring in the <code>highlight.js.scss</code> file when I build my styles using <code>gulp-sass</code> in my application stylesheet build task.</p>
<p>And now highlight.js ready to Use in our application.</p>
<figure class="image">
    ![Highlight.js in Action](http://i.imgur.com/1cUniu9.png)
    <figcaption>Highlight.js in Action</figcaption>
</figure>
<h4>Caveat About Using Highlight.js with Markdown</h4>
<p>My post assumes that for any blocks of text where you want syntax highlighting you're comfortable using the default <a href="https://highlightjs.org/usage/" target="_blank" rel="noopener">highlight.js usage</a> behaviour of wrapping the code with <code>&lt;pre&gt;&lt;code&gt;</code> elements.</p>
<p>Although I blog using Markdown, at the time of this writing I still wrap my text with these elements, unlike <a href="https://help.github.com/articles/creating-and-highlighting-code-blocks/" target="_blank" rel="noopener">GitHub flavoured markdown</a> that lets define the language using regular Markdown syntax.</p>
<p>The reason for this, is that my blog engine renders the Markdown syntax with a bunch of extra HTML woven throughout the code to display it without the need for a library like highlight.js.</p>
<p>It might not be a big deal for you or your project, but I thought it was something you should be aware of when if you're planning on using highlight.js in your application.</p>

	        </div>

            
            <section id="comments">
            <div id="disqus_thread">
                <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript" target="_blank" rel="noopener">comments powered by Disqus.</a></noscript>
            </div>
            </section>
            
		</div>
	</div>
<!--MAIN CONTENT ENDS-->

<!--SIDEBAR CONTENT STARTS-->
	<div class="SubpageBoxSubSm">
		<div class="SubpageBoxSubSmContent">
			
			

			<div class="ProfileImg">
				
				<a href="/bios/david_wesst">
				
					<img src='/images/avatars/davidwesst_400x400.jpg' />
				
				</a>
				
			</div>

			<BR clear="all">

			<h2><a href="/bios/david_wesst">David Wesst</a></h2>
			
			<a href="mailto:questions@davidwesst.com"><img class="ProfileIcon" src="/images/icon_email.png" border="0" alt="Email" title="Email"> Email</a><BR>
			
			
			<a href="http://www.davidwesst.com" target="_blank"><img class="ProfileIcon" src="/images/icon_web.png" border="0" alt="Web" title="Web"> Web</a><BR>
			
			
			<a href="http://twitter.com/davidwesst" target="_blank"><img class="ProfileIcon" src="/images/icon_twitter.png" border="0" alt="Twitter" title="Twitter"> Twitter</a><BR>
			
			
			<a href="https://github.com/davidwesst" target="_blank"><img class="ProfileIcon" src="/images/icon_github.png" border="0" alt="GitHub" title="GitHub"> GitHub</a><br>
			
			
			<a href="https://www.linkedin.com/in/davidwesst" target="_blank"><img class="ProfileIcon" src="/images/icon_linkedin.png" border="0" alt="LinkedIN" title="LinkedIN"> LinkedIn</a><br>
			
			
 			<a href="/feeds/david_wesst.xml"><img class="ProfileIcon" src="/images/icon_subscribe.png" /> RSS</a>
			

			<hr />
			<h4>Looking for someone else?</h4>
			<p>You can find the rest of the Western Devs Crew <a href="/whoweare">here</a>.</p>
		</div>
	</div>
<!--SIDEBAR CONTENT ENDS-->


</div>
</center>
<!--PAGE CONTENT ENDS-->


<!--FOOTER STARTS-->
<center>
  <div class="FooterBarTxt">&copy; 2015 Western Devs. All Rights Reserved. Design by <a href="http://www.karenchudobiak.ca" target="_blank">Karen Chudobiak, Graphic Designer</a></div>
</center>
<!--FOOTER ENDS-->

<!-- NAV FOOTER STARTS -->
<div class="NavFooter">
  <a href="/posts" alt="Posts"><i class="fa fa-newspaper-o fa-2x"></i><span>Posts</span></a>
  <a href="/podcasts" alt="Podcasts"><i class="fa fa-volume-up fa-2x"></i><span>Podcasts</span></a>
  <a href="/whoweare" alt="About"><i class="fa fa-star fa-2x"></i><span>About</span></a>
  <a href="/whatwevedone" alt="What We've Done"><i class="fa fa-trophy fa-2x"></i><span>Work</span></a>
  <a href="/speaking" alt="Speaking"><i class="fa fa-comment-o fa-2x fa-flip-horizontal"></i><span>Speaking</span></a>
</div>
<!-- NAV FOOTER ENDS -->




</div>
<!--WRAPPER ENDS-->


<script>
  var disqus_shortname = 'westerndevs';
  
  var disqus_url = 'https://westerndevs.com/_/How-to-Use-Highlight-Js-with-Bower-and-Gulp/'.replace(".com//", ".com/");
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
  
function shuffle(array) {
  var currentIndex = array.length, temporaryValue, randomIndex;

  // While there remain elements to shuffle...
  while (0 !== currentIndex) {

    // Pick a remaining element...
    randomIndex = Math.floor(Math.random() * currentIndex);
    currentIndex -= 1;

    // And swap it with the current element.
    temporaryValue = array[currentIndex];
    array[currentIndex] = array[randomIndex];
    array[randomIndex] = temporaryValue;
  }

  return array;
}

</script>


</body>

  
<!-- Google Analytics -->
<script type="text/javascript">
if (document.location.hostname.search("westerndevs.com") !== -1 || document.location.hostname.search("www.westerndevs.com") !== -1) {
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-37617956-2', 'auto');

ga('set', 'contentGroup1', 'david_wesst');

ga('send', 'pageview');
}
</script>
<!-- End Google Analytics -->



</html>
