<!DOCTYPE html>
<html lang="en" xml:lang="en">

  <head>
  
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Getting Your Build Server Ready for VS 2015 | Western Devs</title>
  <meta name="description" content="If you&#39;re modernizing your project, one of the things you&#39;ll surely want to do is to make sure that your build server is upgraded to support VS 2015. Regardless of what CI engine you&#39;re using, there w">
<meta property="og:type" content="article">
<meta property="og:title" content="Getting Your Build Server Ready for VS 2015">
<meta property="og:url" content="https://westerndevs.com/_/getting-your-build-server-ready-for-vs-2015/index.html">
<meta property="og:site_name" content="Western Devs">
<meta property="og:description" content="If you&#39;re modernizing your project, one of the things you&#39;ll surely want to do is to make sure that your build server is upgraded to support VS 2015. Regardless of what CI engine you&#39;re using, there w">
<meta property="og:image" content="http://jameschambers.com/wp-content/uploads/2015/07/image_thumb5.png">
<meta property="og:image" content="http://jameschambers.com/wp-content/uploads/2015/07/image14.png">
<meta property="og:image" content="http://jameschambers.com/wp-content/uploads/2015/07/image15.png">
<meta property="og:image" content="http://jameschambers.com/wp-content/uploads/2015/07/image16.png">
<meta property="og:image" content="http://jameschambers.com/wp-content/uploads/2015/07/image17.png">
<meta property="og:image" content="http://jameschambers.com/wp-content/uploads/2015/07/wlEmoticon-smile3.png">
<meta property="article:published_time" content="2015-07-24T18:22:30.000Z">
<meta property="article:modified_time" content="2021-06-18T02:19:16.271Z">
<meta property="article:author" content="Western Devs">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://jameschambers.com/wp-content/uploads/2015/07/image_thumb5.png">
<meta name="twitter:creator" content="@westerndevs">

    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="title" content="WesternDevs">   
    <meta name="keywords" content="software development,software,asp.net,blog">
    <meta name="description" content="We're all west of somewhere">
    <meta name="copyright" content="WesternDevs">
    <meta name="revisit-after" content="15 days">
    <meta name="robots" content="all">
    <meta name="MSSmartTagsPreventParsing" content="true">
  
    <link rel="alternate" href="/feed.xml" title="Western Devs" type="application/atom+xml">
  
  
<link rel="stylesheet" href="/css/style.css">

      
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <script src="//code.jquery.com/jquery-1.11.3.min.js"></script>  
  <meta name="generator" content="Hexo 4.2.0"></head>

<body>

<!-- FIXED HEADER BECAUSE SCROLLING -->
<!--HEADER STARTS-->
<div class="WrapperHeader">
<div style="display:inline-block; text-align: center;">
<div class="Header">

  <div class="HeaderLogo">
    <a href="/"><img src="/images/header_logo_transparent.png" alt="WesternDevs" title="WesternDevs" border="0" style="width: 206px; height: 64px;" width="206" height="64"></a>
  </div>

  <div class="HeaderLinks">
      <a href="/posts" class="nav">POSTS</a>       
      <a href="/podcasts" class="nav">PODCASTS</a>       
      <a href="/whoweare" class="nav">ABOUT</a>  
      <a href="/whatwevedone" class="nav">WHAT WE'VE DONE</a>  
      <a href="/speaking" class="nav">SPEAKING</a>
      <div class="HeaderIcons">
        <a href="mailto:info@westerndevs.com"><img src="/images/icon_email.png" border="0" alt="Email" title="Email" height="26" width="26"></a>
        <a href="/feed.xml"><img src="/images/icon_subscribe.png" border="0" alt="Subscribe" title="Subscribe" height="26" width="27"></a>
        <a href="http://twitter.com/westerndevs" target="_blank"><img src="/images/icon_twitter.png" border="0" alt="Twitter" title="Twitter" height="26" width="27"></a>
        <a href="http://github.com/westerndevs" target="_blank"><img src="/images/icon_github.png" border="0" alt="GitHub" title="GitHub" height="26" width="27"></a>     
      </div>
  </div>
  
</div>
</div>
</div>
<!--HEADER ENDS-->    



<!--WRAPPER STARTS-->
<div class="Wrapper" style="">

<!--SUBHEAD STARTS-->
<div class="WrapperSubHeaderSubpage">
<center>
	<div class="SubHeader">
		<H1 class="title"><img class="icon" src="/images/icon_posts.png" alt="POST" title="POST" border="0"> POST</H1>
	</div>
</center>
</div>
<!--SUBHEAD ENDS-->

<!--PAGE CONTENT STARTS-->
<center>
<div class="WrapperContent">

<!--MAIN CONTENT STARTS-->
	<div class="SubpageBoxSubLrg">
		<div class="SubpageBoxSubLrgContent">
		    <div class='postTitle'>
  <div class="ListLrgDateBG">
    <div class="ListLrgDateMonth">JUL</div>
    <div class="ListLrgDateDay">24</div>
    <div class="ListLrgDateYear">2015</div>
  </div>
  <h2>Getting Your Build Server Ready for VS 2015</h2>
</div>

		    

<p class="TXTsm">ORIGINALLY POSTED TO: <a href="http://jameschambers.com/2015/07/getting-your-build-server-ready-for-vs-2015/" target="_blank" rel="noopener" class='originalurl'>http://jameschambers.com/2015/07/getting-your-build-server-ready-for-vs-2015/</a></p>



			<div id="mainPostContent">
	        <p>If you're modernizing your project, one of the things you'll surely want to do is to make sure that your build server is upgraded to support VS 2015. Regardless of what CI engine you're using, there will be at least a little bit of effort required to get your project building again.</p>
<a id="more"></a>
<blockquote>
<p>In this series we're working through the conversion of an MVC 5-based application and migrating it to MVC 6. You can track the entire series of posts from the <a href="http://jameschambers.com/2015/07/upgrading-a-real-world-mvc-5-application-to-mvc-6/" target="_blank" rel="noopener"><em>intro page</em></a>.</p>
</blockquote>
<p>For the purpose of this exercise, we're using TeamCity to run our builds based on a VSC checkin. We'll get TeamCity prepped to run our build and then update our repository so that we show our build status indicator on the readme home page.</p>
<h2>The TL;DR Details</h2>
<p>Here's the basics of what was required to get the builds back online:</p>
<ul>
<li>Backup and upgrade TeamCity</li>
<li>Allow the agents to upgrade, or upgrade them manually</li>
<li>Install .NET 4.6 and the VS 2015 tools</li>
<li>Ensure that build targets live on your build agents</li>
<li>Run your build</li>
</ul>
<h2>Upgrading the Server</h2>
<p>I engaged my teammate <a href="http://www.clear-measure.com/our-team/" target="_blank" rel="noopener">James Allen</a> here to help with some best practices, namely getting the server backed up. You can either back up the TeamCity data from the web interface or one of the other <a href="https://confluence.jetbrains.com/display/TCD9/TeamCity+Data+Backup" target="_blank" rel="noopener">recommended approaches</a>, or you could snapshot your server for a reset should one be required. During this process, it's a good idea to spin down your build agents so that you're not wrecking anyone's builds.</p>
<p>Next, we needed to move to version 9.1 of TeamCity, so we ran the <a href="https://confluence.jetbrains.com/display/TCD9/Upgrade" target="_blank" rel="noopener">upgrade process</a> via the web site. This is a painless task and takes only a fraction of the time it took to back up the data. Failing any troubles (we saw none), your build server should be back online in no time, and the build agents were notified (and complied!) to update themselves as well.</p>
<p><img width="240" height="191" title="image" align="right" style="margin: 0px 0px 0px 10px; border: 0px currentcolor; border-image: none; float: right; display: inline; background-image: none;" alt="image" src="http://jameschambers.com/wp-content/uploads/2015/07/image_thumb5.png" border="0" scale="0">Next, I downloaded and installed the .NET 4.6 installer and the VS 2015 tooling, which can be found on the <a href="https://www.visualstudio.com/downloads/download-visual-studio-vs" target="_blank" rel="noopener">VS 2015 download page</a>. You'll need to explore through the available downloads on the page, as you can see on this screenshot, to grab the relevant files.</p>
<p>These installs will need to be run on every build agent.</p>
<p>One thing to note was that my original attempt to get the build running failed because of missing build targets at an expected location. I ended up having to copy files from my local machine, where Visual Studio 2015 is installed, from the path: C:Program Files (x86)MSBuildMicrosoftVisualStudiov14.0 on the build server.</p>
<blockquote>
<p>I don't believe this is the best approach to getting the build targets on the build server. I will update this post if I find a better solution.</p>
</blockquote>
<h2>Verifying the Install</h2>
<p>You'll know the tools have been installed correctly if you return to the build configuration settings and add a new build step for msbuild (you don't have to save it). You'll see that you'll have the new options in place:</p>
<p><img src="http://jameschambers.com/wp-content/uploads/2015/07/image14.png" alt="image" title="image"></p>
<p>The build server should be good to go now! For us, we're not using an MSBuild build runner, our application is build with a PowerShell script via a batch file. This allows our build to be executed locally with only a small parameter change, and the CI process is entirely encapsulated in code (and under source control).</p>
<p>Provided your project is pointing at the repository, you'll have a good shot at running the build at this point. For our project, everything worked as expected.</p>
<p><img src="http://jameschambers.com/wp-content/uploads/2015/07/image15.png" alt="image" title="image"></p>
<h2>Showing Some Bling</h2>
<p>Now it's time to beef up our repo, at least a little. What I'm talking about is wearing our CI on our sleeve, letting everyone on the team (or other watchers of the repository) that our builds are healthy or, perhaps, needing some love; let's display the build status indicator on our readme, like this:</p>
<p><img src="http://jameschambers.com/wp-content/uploads/2015/07/image16.png" alt="image" title="image"></p>
<p>First, drill into the build configuration and locate the advanced options under &quot;General Settings&quot;. You need to enable the status widget.</p>
<p><img src="http://jameschambers.com/wp-content/uploads/2015/07/image17.png" alt="image" title="image"></p>
<p>Also, from this screen, take note of your Build Configuration ID. This is important because you'll need to include it in the server request to generate the badge.</p>
<p>Finally, include the following markdown, which is essentially a formatted link with an image inside of it:</p>
<pre><code>Current Build Status [![](http://YOUR_SERVER/app/rest/builds/buildType:(id:YOUR_BUILD_CONFIGURATION_ID)/statusIcon)](http://teamcity/viewType.html?buildTypeId=btN&amp;guest=1)
</code></pre>
<p>Be sure to replace the obvious placeholder tokens with your own information.</p>
<h2>Next Steps</h2>
<p>With our build server updated and our builds back online, it's time to start shifting our targets. In the next post, we're going to update our projects and recover from any errors/challenges we may discover along the way.</p>
<p>Happy coding! <img src="http://jameschambers.com/wp-content/uploads/2015/07/wlEmoticon-smile3.png" alt="Smile"></p>

	        </div>

            
            <section id="comments">
            <div id="disqus_thread">
                <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript" target="_blank" rel="noopener">comments powered by Disqus.</a></noscript>
            </div>
            </section>
            
		</div>
	</div>
<!--MAIN CONTENT ENDS-->

<!--SIDEBAR CONTENT STARTS-->
	<div class="SubpageBoxSubSm">
		<div class="SubpageBoxSubSmContent">
			
			

			<div class="ProfileImg">
				
				<a href="/bios/james_chambers">
				
					<img src='https://www.gravatar.com/avatar/1ac8c631c34a86ddcfb6ae67f6a7a551?s=200' />
				
				</a>
				
			</div>

			<BR clear="all">

			<h2><a href="/bios/james_chambers">James Chambers</a></h2>
			
			<a href="mailto:james@jameschambers.com"><img class="ProfileIcon" src="/images/icon_email.png" border="0" alt="Email" title="Email"> Email</a><BR>
			
			
			<a href="http://jameschambers.com/" target="_blank"><img class="ProfileIcon" src="/images/icon_web.png" border="0" alt="Web" title="Web"> Web</a><BR>
			
			
			<a href="http://twitter.com/canadianjames" target="_blank"><img class="ProfileIcon" src="/images/icon_twitter.png" border="0" alt="Twitter" title="Twitter"> Twitter</a><BR>
			
			
			<a href="https://github.com/MisterJames" target="_blank"><img class="ProfileIcon" src="/images/icon_github.png" border="0" alt="GitHub" title="GitHub"> GitHub</a><br>
			
			
			<a href="https://www.linkedin.com/in/canadianjames" target="_blank"><img class="ProfileIcon" src="/images/icon_linkedin.png" border="0" alt="LinkedIN" title="LinkedIN"> LinkedIn</a><br>
			
			
 			<a href="/feeds/james_chambers.xml"><img class="ProfileIcon" src="/images/icon_subscribe.png" /> RSS</a>
			

			<hr />
			<h4>Looking for someone else?</h4>
			<p>You can find the rest of the Western Devs Crew <a href="/whoweare">here</a>.</p>
		</div>
	</div>
<!--SIDEBAR CONTENT ENDS-->


</div>
</center>
<!--PAGE CONTENT ENDS-->


<!--FOOTER STARTS-->
<center>
  <div class="FooterBarTxt">&copy; 2015 Western Devs. All Rights Reserved. Design by <a href="http://www.karenchudobiak.ca" target="_blank">Karen Chudobiak, Graphic Designer</a></div>
</center>
<!--FOOTER ENDS-->

<!-- NAV FOOTER STARTS -->
<div class="NavFooter">
  <a href="/posts" alt="Posts"><i class="fa fa-newspaper-o fa-2x"></i><span>Posts</span></a>
  <a href="/podcasts" alt="Podcasts"><i class="fa fa-volume-up fa-2x"></i><span>Podcasts</span></a>
  <a href="/whoweare" alt="About"><i class="fa fa-star fa-2x"></i><span>About</span></a>
  <a href="/whatwevedone" alt="What We've Done"><i class="fa fa-trophy fa-2x"></i><span>Work</span></a>
  <a href="/speaking" alt="Speaking"><i class="fa fa-comment-o fa-2x fa-flip-horizontal"></i><span>Speaking</span></a>
</div>
<!-- NAV FOOTER ENDS -->




</div>
<!--WRAPPER ENDS-->


<script>
  var disqus_shortname = 'westerndevs';
  
  var disqus_url = 'https://westerndevs.com/_/getting-your-build-server-ready-for-vs-2015/'.replace(".com//", ".com/");
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
  
function shuffle(array) {
  var currentIndex = array.length, temporaryValue, randomIndex;

  // While there remain elements to shuffle...
  while (0 !== currentIndex) {

    // Pick a remaining element...
    randomIndex = Math.floor(Math.random() * currentIndex);
    currentIndex -= 1;

    // And swap it with the current element.
    temporaryValue = array[currentIndex];
    array[currentIndex] = array[randomIndex];
    array[randomIndex] = temporaryValue;
  }

  return array;
}

</script>


</body>

  
<!-- Google Analytics -->
<script type="text/javascript">
if (document.location.hostname.search("westerndevs.com") !== -1 || document.location.hostname.search("www.westerndevs.com") !== -1) {
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-37617956-2', 'auto');

ga('set', 'contentGroup1', 'james_chambers');

ga('send', 'pageview');
}
</script>
<!-- End Google Analytics -->



</html>
